üóÇ P√≥s-Provisionamento do SAMBA 4 Server ‚Äì Troubleshooting

-Troubleshooting p√≥s-instala√ß√£o do SAMBA4
    sudo samba -V
    sudo service ntp status
    sudo ps -auxf | grep -i samba
    sudo netstat -tulpen | egrep 53

-Informa√ß√µes dos Servi√ßos de Rede integrado com o SAMBA4
    SSH (Secure Shell ‚Äì Porta 22)
    DNS (Domain Name System ‚Äì Porta 53)
    SMB (Server Message Block NetBIOS ‚Äì Portas padr√£o: 137 at√© 139)
    RPC/ECM (Porta padr√£o 135)
    CIFS (Common Internet File System ‚Äì Porta padr√£o 445)
    LDAP (Lightweight Directory Access Protocol ‚Äì Porta padr√£o 389)
    LDAPS (Lightweight Directory Access Protocol Secure ‚Äì Porta padr√£o 636)
    GC (Global Catalog ‚Äì Porta padr√£o 3268 at√© 3269)
    Kerberos (Porta padr√£o 88/464)
    NTP (Network Time Protocol ‚Äì Porta padr√£o 123)
    DHCP (Dynamic Host Configuration Protocol ‚Äì Porta padr√£o 67 at√© 68)
    NFS (Network File System ‚Äì Porta 2049)
    CUPS (Common Unix Print System ‚Äì Porta 631)

-Verificando o arquivo de configura√ß√£o do nsswitch.conf
    sudo cat /etc/nsswitch.conf | grep hosts

-Verificando o arquivo de configura√ß√£o das interfaces
    sudo cat /etc/network/interfaces

-Desligar/ligar placa de rede
    sudo ifdown enp0s3
    sudo ifup enp0s3

-Confirmando as mundan√ßas de endere√ßamento
    sudo ifconfig
    sudo route -n
    sudo cat /et/resolv.conf

-Verifica√ß√µes importantes do SAMBA4 p√≥s instala√ß√£o
    sudo samba-tool testparm
    sudo samba-tool domain info (nome do dom√≠nio)
    sudo samba-tool dbcheck
    sudo samba-tool time
    sudo samba-tool drs showrepl
    sudo samba-tool drs bind
    sudo samba-tool dns serverinfo (nome do dom√≠nio)
    sudo samba-tool gpo listall
    sudo samba-tool group list
    sudo samba-tool user list
    sudo samba-tool domain passwordsettings show
    sudo samba-tool fsmo show

-Informa√ß√µes sobre o FSMO
    1. Schema Master (Mestre de Esquema);
    2. Domain Name Master (Mestre de Nomea√ß√£o de Dom√≠nio);
    3. PDC Emulator (Emulador de Controlador de Dom√≠nio Prim√°rio);
    4. RID Master (Mestre ID Relativo ‚Äì SID)
    5. Infra-Structure Master (Mestre de Infra-Estrutura).

-Testando o DNS integrado com o SAMBA4
    sudo samba-tool dns query (hostname) (nome do dom√≠nio em mai√∫sculo) @ ALL --username administrator

-Testando o acesso ao cliente do SAMBA no servidor local
    sudo smbclient -L localhost -U%
    sudo smbclient -L (ip do server) -U%
    sudo smbclient -L (nome do dom√≠nio) -U%
    sudo smbclient -L (hostname) -U%
    sudo smbclient -L (nome completo do server) -U%
    sudo smbclient //localhost/netlogon -U 'administrator'

-Testando as configura√ß√µes de resolu√ß√£o DNS local utilizando o comando host
    sudo host -t A (hostname)
    sudo host -t A (nome completo do server)
    sudo host -t A (ip do server)
    sudo host -t A (nome do dom√≠nio)

-Testando as configura√ß√µes de resolu√ß√£o DNS local utilizando o comando nslookup
    sudo nslookup (hostname)
    sudo nslookup (nome completo do server)
    sudo nslookup (ip do server)

-Testando a conectividade
    ping (nome completo do server)
    ping (nome do dom√≠nio)
    ping www.google.com

-Testando LDAP com DNS integrado no SAMBA4
    sudo host -t NS (nome do dom√≠nio)
    sudo host -t SOA (nome do dom√≠nio)
    sudo host -t SRV _ldap._tcp.(nome do dom√≠nio)
    sudo host -t SRV _kerberos._udp.(nome do dom√≠nio)
    sudo host -t SRV _ldap._tcp.gc._msdcs.(nome do dom√≠nio)

-Testando o Kerberos e a gera√ß√£o de KDC
    sudo kinit administrator@(nome do dom√≠nio em mai√∫sculo)
    sudo klist
    sudo klist -l
